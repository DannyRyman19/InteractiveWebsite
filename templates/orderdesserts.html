{% extends 'layout.html' %}

{% block body %}
<h1>Desserts</h1>
<h4>Order ID: {{order_id}}</h4>
<hr>

<table id="TableDesserts" class="table table-striped">
        <tr><th>Name</th>
        <th>Price</th>
        <th>Optional Message</th>
        <th>Stock</th>
        <th>Quantity</th>
        
        <th></th>

    </tr>
{% for dessert in desserts %}



  
            <tr>
                    <form id = "Form{{dessert.product_id}}" action = "/tables/{{table_id}}/add_to_order/{{order_id}}/{{dessert.product_id}}/{{dessert.price}}/" method = "POST">
                    <td>{{dessert.name}}</td> 
                    <td>Â£{{dessert.price}}</td>
                    <td><textarea style="width: 100px;" name = "message{{dessert.product_id}}" id="message{{dessert.product_id}}"></textarea></td>
                    <td>{{dessert.stock}}</td>
                    <td><input type="button" id ='SubButton{{dessert.product_id}}' value = "-">
                    <input type="number" min= "0" name="quantity{{dessert.product_id}}" style="width: 30px;" id="quantity{{dessert.product_id}}" value =0>
                    <input type="button" id ='AddButton{{dessert.product_id}}' value = "+">
                    <script>
                    $('#SubButton{{dessert.product_id}}').on('click', function () {
                    var input = $('#quantity{{dessert.product_id}}');
                    if (parseInt(input.val()) != 0){
                        input.val(parseInt(input.val()) - 1);
                        }
                    })               
                    </script>
                    <script>
                        $('#AddButton{{dessert.product_id}}').on('click', function () {
                        var input = $('#quantity{{dessert.product_id}}');
                        if (parseInt(input.val()) < {{dessert.stock}} ){
                            input.val(parseInt(input.val()) + 1);
                        }
                    })    
                    </script>
                    </td>
                    {% if dessert.stock > 0 %}
                        <td><input class = "btn btn-success" type = "Submit" value = "Add to Order"></input></td>
                    {% else %}
                        <td><input  type = "Submit"  class="btn btn-danger" value = "Add to Order" disabled="true"></input></td>
                    {% endif %}
                   
                

                </tr>
            </form>
    {% endfor %}  
</table>

    

<hr>







{% endblock %}